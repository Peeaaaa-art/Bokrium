.books-grid {
  display: flex;
  flex-direction: column;
  gap: 64px;
  padding: 2rem 1rem;
  background-color:rgba(221, 231, 233, 0.148);
}

.shelf {
  display: flex;
  justify-content: center;
  align-items: flex-end; /* ğŸ‘ˆ æœ¬ã®ä¸‹ç«¯ã‚’æƒãˆã‚‹ */
  flex-wrap: wrap;
  gap: 24px;
  position: relative;
  min-height: 280px;
}

.shelf::before {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 5%;
  width: 90%;
  height: 20px;
  background: linear-gradient(145deg, #1e3d73, #00274d);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.4),
    inset 0 -1px 2px rgba(255,255,255,0.15),
    inset 0 2px 6px rgba(0,0,0,0.2); /* ğŸ‘ˆ å…‰æ²¢ã¨é™°å½± */
  border-radius: 4px;
  transform: perspective(800px) rotateX(0.5deg); /* ğŸ‘ˆ å¥¥è¡Œããƒ‘ãƒ¼ã‚¹ */
  z-index: 0;
}

.shelf::after {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 5%;
  width: 90%;
  height: 4px;
  background: linear-gradient(to right, rgba(255,255,255,0.4), rgba(255,255,255,0.1));
  border-radius: 2px;
  z-index: 1; // ğŸ‘ˆ æ£šã‚ˆã‚Šå‰ã«å‡ºã™
  pointer-events: none;
  opacity: 0.8;
  box-shadow:
    0 1px 2px rgba(255, 255, 255, 0.3),
    0 -1px 2px rgba(0, 0, 0, 0.2); // ä¸Šé¢ã¨ä¸‹é¢ã®å…‰ã¨å½±
  mix-blend-mode: screen;          // â›³ å…‰ã®å±ˆæŠ˜æ„Ÿï¼ˆå¿…æ®ºæŠ€ï¼‰
}

.book-on-shelf {
  position: relative;
  z-index: 1;
  width: 120px;

  @media (max-width: 576px) {

    width: 70px;
  }

  display: flex;
  justify-content: center;
  margin-bottom: -2px;
  perspective: 400px;

  /* ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§å‚¾ãã¨Yä½ç½®ã‚’å—ã‘å–ã‚‹ */
  transform:
    rotate(var(--tilt, 0deg))           // å·¦å³ã®é¦–ã‹ã—ã’
    translateY(var(--y-offset, 0px))    // å¾®å¦™ãªä¸Šä¸‹ãšã‚Œ
    rotateX(var(--lean, 0deg));         // ğŸ‘ˆ å¥¥è¡Œãæ–¹å‘ã®å‚¾ãï¼ˆé è¿‘æ„Ÿï¼‰
  transform-style: preserve-3d;
}

/* æ“¬ä¼¼çš„ã«ãƒ©ãƒ³ãƒ€ãƒ ãªå‚¾ãã‚’ä¸ãˆã‚‹ */
@for $i from 1 through 12 {
  .book-on-shelf:nth-child(#{$i}) {
    --tilt: #{(random(5) - 2) / 10}deg;       // â†’ -0.2degã€œ+0.2degï¼ˆZè»¸ï¼šæ¨ªå‚¾ãï¼‰
    --y-offset: #{(random(5) - 3) / 10}px;     // â†’ -0.3pxã€œ+0.1pxï¼ˆä¸Šä¸‹ä½ç½®ï¼‰
    --lean: #{(random(5) - 2) / 10}deg;        // â†’ -0.2degã€œ+0.2degï¼ˆXè»¸ï¼šå¥¥æ–¹å‘ï¼‰
  }
}

.book-cover {
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;
  object-fit: cover;
  border-radius: 6px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    2px 12px 16px -4px rgba(0, 0, 0, 0.2); /* ğŸ‘ˆ å¾Œã‚ä¸‹ã«æµã‚Œã‚‹å½± */
  filter:
  drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.05))   // å¾®ç´°ãªç«‹ä½“ç¸
  drop-shadow(2px 8px 12px rgba(0, 0, 0, 0.18)); // æ¥åœ°å½±ã®å¼·èª¿
  transform:
    translateY(0)
    translateZ(1px); // ğŸ‘ˆ å¾®ç´°ãªå‰é¢æ¼”å‡ºï¼ˆè¦–å·®æ„Ÿï¼‰
  transition: transform 0.2s ease, filter 0.2s ease, box-shadow 0.2s ease;
  backface-visibility: hidden;
}

.book-cover::before {
  content: "";
  position: absolute;
  left: 0;
  top: 5%;
  bottom: 5%;
  width: 3px;
  background: rgba(0, 0, 0, 0.06);
  border-radius: 2px;
  transform: translateX(-2px);
  z-index: 0;
  pointer-events: none;
}

.book-cover:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 16px rgba(0,0,0,0.25);
}

.book-cover-show {
  width: 100%;
  aspect-ratio: 4 / 5;
  display: block;
  border-radius: 4px;
  object-fit: contain;
  box-sizing: border-box;
  margin: 8px auto;
}
