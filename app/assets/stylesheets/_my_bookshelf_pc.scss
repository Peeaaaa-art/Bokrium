.books-grid {
  display: flex;
  flex-direction: column;
  gap: 24px;

  @media (max-width: 576px) {
    gap: 12px;
  }
}

.shelf {
  display: flex;
  justify-content: center;
  align-items: flex-end; /* ğŸ‘ˆ æœ¬ã®ä¸‹ç«¯ã‚’æƒãˆã‚‹ */
  flex-wrap: wrap;
  gap: 24px;
  position: relative;
  min-height: 280px;

  @media (max-width: 576px) {
    gap: 8px;
    min-height: 140px;
  }
}

.shelf::before {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 5%;
  width: 90%;
  height: 20px;
  background-image:
    linear-gradient(160deg, #002fa7, #002d90),
    repeating-radial-gradient(circle at 40% 60%, rgba(255,255,255,0.02) 0, transparent 1px, transparent 3px);
  background-blend-mode: overlay;
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.4),
    inset 0 -1px 2px rgba(255,255,255,0.15),
    inset 0 2px 6px rgba(0,0,0,0.2); /* ğŸ‘ˆ å…‰æ²¢ã¨é™°å½± */
  border-radius: 4px;
  transform: perspective(800px) rotateX(0.5deg); /* ğŸ‘ˆ å¥¥è¡Œããƒ‘ãƒ¼ã‚¹ */
  z-index: 0;

    @media (max-width: 576px) {
    height: 13px;
    box-shadow:
      0 1px 4px rgba(0, 0, 0, 0.2),
      inset 0 -1px 1px rgba(255, 255, 255, 0.1),
      inset 0 1px 3px rgba(0, 0, 0, 0.1);
  }
}

.shelf::after {
  content: "";
  position: absolute;
  bottom: -20px;
  left: 5%;
  width: 90%;
  height: 4px;
  background: linear-gradient(to right, rgba(0, 47, 167, 0.15), rgba(0, 47, 167, 0.1));
  border-radius: 2px;
  z-index: 1;
  pointer-events: none;
  opacity: 0.5;
  box-shadow:
    0 1px 2px rgba(255, 255, 255, 0.1),
    0 -1px 2px rgba(0, 0, 0, 0.15);
  mix-blend-mode: normal;

    @media (max-width: 576px) {
    height: 2px;
  }
}

.shelf::before,
.shelf::after {


  @media (max-width: 576px) {
    left: 2%;
    width: 96%;
  }
}

.book-on-shelf {
  position: relative;
  z-index: 1;
  width: 120px;
  display: flex;
  justify-content: center;
  margin-bottom: -2px;
  perspective: 400px;
  transform:
    rotate(var(--tilt, 0deg))           // å·¦å³ã®é¦–ã‹ã—ã’
    translateY(var(--y-offset, 0px))    // å¾®å¦™ãªä¸Šä¸‹ãšã‚Œ
    rotateX(var(--lean, 0deg));        // ğŸ‘ˆ å¥¥è¡Œãæ–¹å‘ã®å‚¾ãï¼ˆé è¿‘æ„Ÿï¼‰
  transform-style: preserve-3d;

  @media (max-width: 576px) {
    margin-bottom: -9px;
    width: 70px;
  }
}

@for $i from 1 through 12 {
  .book-on-shelf:nth-child(#{$i}) {
    --tilt: #{(random(5) - 2) / 10}deg;
    --y-offset: #{(random(5) - 3) / 10}px;
    --lean: #{(random(5) - 2) / 10}deg;
  }
}


.book-cover {
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;
  object-fit: cover;
  border-radius: 6px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    2px 12px 16px -4px rgba(0, 0, 0, 0.2); /* ğŸ‘ˆ å¾Œã‚ä¸‹ã«æµã‚Œã‚‹å½± */
  filter:
  drop-shadow(1px 1px 1px rgba(0, 0, 0, 0.05))   // å¾®ç´°ãªç«‹ä½“ç¸
  drop-shadow(2px 8px 12px rgba(0, 0, 0, 0.18)); // æ¥åœ°å½±ã®å¼·èª¿
  transform:
    translateY(0)
    translateZ(1px); // ğŸ‘ˆ å¾®ç´°ãªå‰é¢æ¼”å‡ºï¼ˆè¦–å·®æ„Ÿï¼‰
  transition: transform 0.2s ease, filter 0.2s ease, box-shadow 0.2s ease;
  backface-visibility: hidden;
}

.book-cover::before {
  content: "";
  position: absolute;
  left: 0;
  top: 5%;
  bottom: 5%;
  width: 3px;
  background: rgba(0, 0, 0, 0.06);
  border-radius: 2px;
  transform: translateX(-2px);
  z-index: 0;
  pointer-events: none;
}

.book-cover:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 16px rgba(0,0,0,0.25);
}

.book-cover-show {
  width: 100%;
  aspect-ratio: 4 / 5;
  display: block;
  border-radius: 4px;
  object-fit: contain;
  box-sizing: border-box;
  margin: 8px auto;
}
