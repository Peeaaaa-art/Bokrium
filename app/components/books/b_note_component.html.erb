<div class="container-lg">
  <div class="table-responsive">
<table class="table table-striped table-rounded table-fixed align-middle mb-0">
  <colgroup>
    <col style="width: 5%;">
    <col style="width: 45%;">
    <col style="width: 25%;">
    <col style="width: 20%;">
    <col style="width: 5%;">
  </colgroup>

  <% unless request.headers["Turbo-Frame"] == "next_books" %>
    <div class="mt-3">
      <thead class="table-light-bok">
        <tr>
          <th><%= helpers.bi_icon("pin", css: "is-6") %></th>
          <th>タイトル</th>
          <th>著者</th>
          <th>出版社</th>
          <th></th>
        </tr>
      </thead>
    </div>
  <% end %>
  <tbody data-controller="book-list">
    <% start_index = @pagy.from - 1 %>
    <% @books.each_with_index do |book, index| %>
      <%= render partial: "bookshelf/b_note_row", locals: {
            book: book,
            index: start_index + index,
            idx: index
          } %>
    <% end %>
  </tbody>
</table>
  </div>
</div>

<% if @pagy.next %>
  <turbo-frame id="next_books"
               src="<%= helpers.books_index_path(view: 'b_note', page: @pagy.next) %>"
               loading="lazy">
    <%= render "shared/loading_spinner" %>
  </turbo-frame>
<% end %>