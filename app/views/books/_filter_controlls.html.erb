  <!-- üéØ ‰∏≠Â§ÆÔºö„Éï„Ç£„É´„Çø„Éº„Éú„Çø„É≥Áæ§ -->
  <div class="mx-auto">
    <div class="filter-controls border rounded-pill shadow-sm px-4 py-md-1 d-flex align-items-center gap-3">

      <!-- Ê§úÁ¥¢ -->
      <button class="btn btn-icon" data-bs-toggle="collapse" data-bs-target="#searchCollapse" aria-expanded="false">
        <i class="bi bi-search icon-refined"></i>
      </button>

      <!-- „ÇΩ„Éº„Éà -->
      <button class="btn btn-icon" data-bs-toggle="collapse" data-bs-target="#sortCollapse" aria-expanded="false">
        <i class="bi bi-arrow-down-up icon-refined"></i>
      </button>

      <!-- „Çø„Ç∞ -->
      <button class="btn btn-icon" data-bs-toggle="collapse" data-bs-target="#tagCollapse" aria-expanded="false">
        <i class="bi bi-tags icon-refined"></i>
      </button>

      <!-- „Çπ„ÉÜ„Éº„Çø„Çπ -->
      <button class="btn btn-icon" data-bs-toggle="collapse" data-bs-target="#statusCollapse" aria-expanded="false">
        <i class="bi bi-journal-check icon-refined"></i>
      </button>

    </div>
  </div>

  <!-- „ÇØ„É™„Ç¢„Éú„Çø„É≥ -->
  <div class="flex-shrink-0">
    <% if session.to_h.slice("sort", "status", "memo_visibility", "tags", "view").values.any?(&:present?) %>
      <%= button_to clear_filters_books_path,
                    method: :delete,
                    class: "btn btn-light border shadow-sm d-flex align-items-center justify-content-center bookshelf-icon",
                    title: "„ÇØ„É™„Ç¢" do %>
        <i class="bi bi-x-circle fs-5 icon-refined"></i>
      <% end %>
    <% else %>
      <div class="btn btn-light border shadow-sm d-flex align-items-center justify-content-center bookshelf-icon invisible">
        <i class="bi bi-x-circle fs-5 icon-refined"></i>
      </div>
    <% end %>
  </div>
</div>


<!-- üì¶ ‰∏ã„ÅÆË°åÔºö„Éà„Ç∞„É´„ÅßÂ±ïÈñã„Åï„Çå„ÇãÂÜÖÂÆπ -->
  <!-- Ê§úÁ¥¢„Éï„Ç©„Éº„É† -->
  <div class="collapse mb-2" id="searchCollapse">
    <%= render "shared/search_bar", scope: "mine", placeholder: "Ëá™ÂàÜ„ÅÆÊú¨„ÇÑ„É°„É¢„ÇíÊ§úÁ¥¢", view_mode: @view_mode %>
  </div>

  <!-- „ÇΩ„Éº„Éà -->
  <div class="collapse mb-2" id="sortCollapse">
    <%= render "sort_controls", filtered_tag: filtered_tag, current_sort: params[:sort], view_mode: @view_mode %>
  </div>

  <!-- „Çø„Ç∞ -->
  <div class="collapse mb-2" id="tagCollapse"
      data-controller="tag-toggle"
      data-tag-toggle-selected-tags-value="<%= filtered_tags&.join(',') %>">
    <turbo-frame id="tag_filter_frame" src="<%= filter_books_tags_path %>">
      Ë™≠„ÅøËæº„Åø‰∏≠‚Ä¶
    </turbo-frame>
  </div>

  <!-- „Çπ„ÉÜ„Éº„Çø„Çπ -->
  <div class="collapse mb-2" id="statusCollapse">
    <%= render "status_filter", current_status: filtered_status, view_mode: @view_mode %>
  </div>