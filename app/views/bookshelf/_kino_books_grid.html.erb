<div id="books-grid" class="books-grid" data-controller="book-shelf">
  <% books.each_slice(@slice || 10) do |row_books| %>
    <div class="shelf">
      <% row_books.each do |book| %>
        <div class="book-on-shelf">
          <%= link_to book_path(book), data: { turbo_frame: "_top" } do %>
            <% if book.book_cover_s3.attached? %>
              <%= image_tag book.book_cover_s3.variant(resize_to_limit: [180, 270]),
                    alt: book.title,
                    class: "book-cover img-fluid rounded shadow" %>
            <% elsif book.book_cover.present? %>
              <img src="<%= book.book_cover %>" alt="表紙画像" class="book-cover rounded shadow">
            <% else %>
              <div class="no-cover book-cover"><%= book.title %></div>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

