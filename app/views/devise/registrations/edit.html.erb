<div class="container my-5" style="max-width: 640px;">
  <div class="card shadow-sm border-0 mb-5">
    <div class="card-body px-5 py-5">
      <h2 class="text-center mb-4 text-primary fw-bold">アカウント情報の変更</h2>

      <%= form_with(model: resource, url: registration_path(resource_name), method: :put, local: true, html: { multipart: true }) do |f| %>
        <%= render "devise/shared/error_messages", resource: resource %>

        <!-- 名前 -->
        <div class="mb-3">
          <%= f.label :name, "名前", class: "form-label fw-semibold" %>
          <%= f.text_field :name, class: "form-control", placeholder: "名前を入力してください" %>
        </div>

        <!-- アバター画像 -->
        <div class="mb-3">
          <%= f.label :avatar_s3, "アバター画像", class: "form-label fw-semibold" %>
          <%= f.file_field :avatar_s3, class: "form-control", direct_upload: true %>
            <div class="mt-3 text-center">
              <%= image_tag user_avatar(resource, size: :medium), alt: resource.name, class: "avatar-circle-medium shadow-sm" %>
            </div>
        </div>

        <!-- 送信 -->
        <div class="d-grid mb-3">
          <%= f.submit "プロフィール更新", class: "btn btn-primary-bok btn-lg shadow-sm" %>
        </div>
      <% end %>
      <div class="d-flex flex-column flex-sm-row justify-content-center gap-3 mt-5">
        <%= link_to "メールアドレスを変更する", edit_user_email_path, class: "btn btn-outline-primary px-4" %>
        <%= link_to "パスワードを変更する", send_reset_link_user_password_path, class: "btn btn-outline-secondary px-4" %>
      </div>
    </div>
  </div>


  <!-- アカウント削除 -->
  <div class="card mt-4 border-0  px-5">
    <div class="card-body text-center">
      <h5 class="text-danger fw-bold mb-2">アカウント削除</h5>
      <p class="text-muted small mb-3">この操作は元に戻せません。全てのメモ・書籍データが削除されます。</p>
      <%= button_to "アカウントを削除する", registration_path(resource_name),
            method: :delete,
            data: { turbo_confirm: "本当に削除してもよろしいですか？" },
            class: "btn btn-outline-danger w-100" %>
    </div>
  </div>

  <!-- 戻る -->
  <div class="mt-4 text-center">
    <%= link_to "戻る", :back, class: "btn btn-link text-decoration-none" %>
  </div>
</div>