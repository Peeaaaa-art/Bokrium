<% books.each_slice(books_per_shelf).with_index do |row_books, idx| %>
  <div class="shelf-row fade-in kino-fade-in delay-<%= idx %>" data-controller="book-shelf">
    <div class="book-row">
      <% row_books.each do |book| %>
        <div class="book-on-shelf">
          <%= link_to book_link_path(book), data: { turbo_frame: "_top" } do %>
            <%= display_book_cover book,
                s3_class: "book-cover kino-rounded",
                url_class: "book-cover kino-rounded",
                nocover_img: true
            %>
          <% end %>
        </div>
      <% end %>
    </div>
    <div class="shelf-bar"></div>
    <div class="shelf-depth"></div>
  </div>
<% end %>