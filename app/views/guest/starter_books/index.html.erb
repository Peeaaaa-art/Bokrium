<div class="container py-5 px-3 px-md-5" style="max-width: 720px;">
  <div class="mb-5 text-center">
    <h1 class="display-4 fw-bold mb-2 big-shoulders-inline-bold">
      Bokrium の使い方
    </h1>
    <p class="lead text-muted" style="font-style: italic;">
      読書体験を、記録し、共有する新しい棚へようこそ。
    </p>
  </div>


  <section class="mb-5">
    <h2 class="border-bottom pb-2 mb-3">1. 書籍の登録と整理</h2>
    <p>本は以下の方法で追加できます：</p>
    <ol class="mb-3">
      <li>ISBN を入力、またはバーコードをスキャン</li>
      <li>手動でタイトル・著者などを入力</li>
      <li>カバー画像のアップロード</li>
    </ol>
    <p>登録後は、<span class="badge bg-info text-dark">タグ</span> で整理したり、<span class="badge bg-success">公開</span>／<span class="badge bg-secondary">非公開</span> を切り替えられます。</p>
  </section>

  <section class="mb-5">
    <h2 class="border-bottom pb-2 mb-3">2. メモの基本操作</h2>
    <p>Markdown によるリッチテキスト入力が可能です。以下のように簡単に装飾できます：</p>
    <ul class="list-group list-group-flush mb-3">
      <li class="list-group-item">「# 見出し」で大見出し（H1〜H6）</li>
      <li class="list-group-item">「**太字**」や「*イタリック*」の強調</li>
      <li class="list-group-item">リスト（- や 1.）の自動補完</li>
      <li class="list-group-item">引用「> 読書とは…」などの挿入</li>
    </ul>
    <div class="alert alert-secondary border-start border-4 border-warning">
      <strong>Tip:</strong> テキストを選択すると、上に装飾メニューが表示されます。
    </div>
  </section>

  <section class="mb-5">
    <h2 class="border-bottom pb-2 mb-3">3. メモの共有と発見</h2>
    <p>
      Bokriumでは、作成した読書メモの公開範囲を設定できます。デフォルトでは
      <span class="badge bg-dark">非公開</span> になっており、
      あなた以外は見ることができません。
    </p>

    <div class="row row-cols-1 row-cols-md-3 g-3 mt-3">
      <div class="col">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-lock-fill me-2 text-dark"></i>非公開
            </h5>
            <p class="card-text text-muted small">
              あなただけが閲覧できます。安心してメモを保存・整理できます。
            </p>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-link-45deg me-2 text-secondary"></i>リンク限定
            </h5>
            <p class="card-text text-muted small">
              URLを知っている人だけがアクセスできます。
            </p>
          </div>
        </div>
      </div>

      <div class="col">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h5 class="card-title">
              <i class="bi bi-globe2 me-2 text-primary"></i>公開
            </h5>
            <p class="card-text text-muted small">
              サイトに表示され、全員が閲覧できます。
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="mb-5">
    <h2 class="border-bottom pb-2 mb-3">よくある質問</h2>
    <div class="accordion" id="faqAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq1">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1">
            Markdownが使えるのはどこですか？
          </button>
        </h2>
        <div id="collapse1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            メモ作成時のテキストエリア（TipTapエディタ）内で利用可能です。
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq2">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2">
            公開範囲は後から変更できますか？
          </button>
        </h2>
        <div id="collapse2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
          <div class="accordion-body">
            はい、いつでも変更可能です。メモの編集モーダルから切り替えてください。
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="text-center mt-5">
    <%= link_to "はじめてみる", search_books_path, class: "btn btn-lg btn-primary shadow-sm px-4 py-2" %>
  </div>
</div>

<% @books.each_slice(@books_per_shelf) do |row_books| %>
  <div class="shelf-row" data-controller="book-shelf">
    <div class="book-row">
      <% row_books.each do |book| %>
        <div class="book-on-shelf">
          <%= link_to guest_starter_book_path(book), data: { turbo_frame: "_top" } do %>
            <% if book.book_cover_s3.attached? %>
              <%= image_tag book.book_cover_s3.variant(resize_to_limit: [200, 200]),
                    alt: book.title, class: "book-cover", loading: "lazy" %>
            <% elsif book.book_cover.present? %>
              <img src="<%= book.book_cover %>" alt="表紙画像" class="book-cover" loading="lazy">
            <% else %>
              <div class="no-cover">
                <span class="title">
                  <%= book.title.truncate(30, omission: "").ljust(10).gsub(" ", "&nbsp;").html_safe %>
                </span>
              </div>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>
    <div class="shelf-bar"></div>
    <div class="shelf-depth"></div>
  </div>
<% end %>