<nav class="navbar navbar-expand-lg navbar-dark rhodia-gray shadow-sm">
  <div class="container-fluid px-md-5 px-4">

    <!-- PC用: 大きなロゴ -->
    <%= link_to "Bokrium", root_path,
          class: "text-light navbar-brand fw-bold text-primary big-shoulders-inline-bold logo-link d-none d-lg-block",
          style: "font-size: 3.5rem;" %>

    <!-- ✅ スマホ専用ナビ（lg未満で表示） -->
    <div class="d-flex d-lg-none justify-content-between align-items-center w-100 px-２ py-3" style="min-height: 72px;">
      <!-- 左: 大きめロゴ -->
      <%= link_to root_path, class: "text-light text-decoration-none fw-bold big-shoulders-inline-bold", style: "font-size: 2.2rem;" do %>
        Bokrium
      <% end %>

      <!-- 中央: ナビアイコン（やや大きく、gapもゆったり） -->
      <div class="d-flex justify-content-center gap-4 px-2">
        <%= link_to books_path, class: "text-light" do %>
          <i data-lucide="library-big" style="width: 32px; height: 32px; stroke-width: 1"></i>
        <% end %>
        <%= link_to search_books_path, class: "text-light" do %>
          <i data-lucide="search" style="width: 32px; height: 32px; stroke-width: 1.25"></i>
        <% end %>
        <%= link_to "#", class: "text-light" do %>
          <i data-lucide="users" style="width: 32px; height: 32px; stroke-width: 1.25"></i>
        <% end %>
      </div>

      <!-- 右: アバター -->
      <div class="ps-2">
        <% if user_signed_in? %>
          <%= link_to user_path(current_user) do %>
            <%= image_tag user_avatar(current_user, size: 40), alt: current_user.name, class: "rounded-circle", style: "width: 36px; height: 36px; object-fit: cover;" %>
          <% end %>
        <% else %>
          <%= link_to new_user_session_path, class: "btn btn-sm btn-primary" do %>
            ログイン
          <% end %>
        <% end %>
      </div>
    </div>
    <!-- ナビゲーションとユーザー -->
    <div class="navbar-collapse justify-content-between d-none d-lg-block">
      <ul class="navbar-nav text-end mx-auto mb-2 mb-lg-0" style="font-size: 1.25rem;">
        <li class="nav-item">
          <%= nav_link_to root_path do %>
            <i data-lucide="home" class="me-2" style="width: 20px; height: 20px; stroke-width: 1.75;"></i>
            <%= t('nav.home', default: 'ホーム') %>
          <% end %>
        </li>
        <li class="nav-item">
          <%= nav_link_to books_path do %>
            <i data-lucide="library" class="me-2" style="width: 20px; height: 20px;"></i>
            <%= t('nav.service', default: 'じぶんの本棚') %>
          <% end %>
        </li>
        <li class="nav-item">
          <%= nav_link_to search_books_path do %>
            <i data-lucide="search" class="me-2" style="width: 20px; height: 20px;"></i>
            <%= t('nav.portfolio', default: '書籍検索') %>
          <% end %>
        </li>
        <li class="nav-item">
          <%= nav_link_to "#" do %>
            <i data-lucide="users" class="me-2" style="width: 20px; height: 20px;"></i>
            <%= t('nav.price', default: 'みんなの本棚') %>
          <% end %>
        </li>
      </ul>
      <!-- PC用：ユーザーアイコンまたは認証ボタン -->
      <div class="d-none d-lg-flex align-items-center gap-2 ms-lg-3">
        <% if user_signed_in? %>
          <%= link_to user_path(current_user) do %>
            <%= image_tag user_avatar(current_user, size: :small), alt: current_user.name, class: "avatar-circle-mini" %>
          <% end %>
        <% else %>
          <%= link_to t('devise.sessions.new.sign_in', default: 'ログイン'), new_user_session_path, class: 'btn btn-primary' %>
          <%= link_to t('devise.registrations.new.sign_up', default: '新規登録'), new_user_registration_path, class: 'btn btn-success' %>
        <% end %>
      </div>
    </div>

  </div>
</nav>