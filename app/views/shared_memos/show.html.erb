<div class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-7">
      <div class="card shadow-sm border-0">
        <!-- ヘッダー -->
        <div class="card-header text-center bg-rhodia-orange text-white">
          <h4 class="mb-0"><%= @book.title %></h4>
          <p class="mb-0 small"><%= @book.author.presence || "著者不明" %></p>
        </div>

        <!-- 書影 -->
        <% if @book.book_cover_s3.attached? || @book.book_cover.present? %>
          <div class="text-center my-3">
            <% if @book.book_cover_s3.attached? %>
              <%= image_tag @book.book_cover_s3.variant(resize_to_limit: [200, 300]), class: "img-fluid rounded" %>
            <% else %>
              <img src="<%= @book.book_cover %>" class="img-fluid rounded" style="max-height: 300px;" alt="表紙画像">
            <% end %>
          </div>
        <% end %>

        <!-- メモ本文 -->
        <div class="card-body rhodia-grid-bg px-4 py-3">
          <%= @memo.content&.html_safe.presence || "<p class='text-muted'>（このメモにはまだ内容がありません）</p>".html_safe %>
        </div>

        <!-- 更新情報 -->
        <div class="card-footer d-flex justify-content-between small text-muted">
          <span><i class="bi bi-clock-history me-1"></i><%= @memo.updated_at.strftime("%Y/%m/%d %H:%M") %></span>
          <span><i class="bi bi-person-circle me-1"></i><%= @user.name.presence || "匿名ユーザー" %></span>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .ProseMirror {
    pointer-events: none;
    user-select: text;
  }
</style>