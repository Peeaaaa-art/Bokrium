<div class="container text-center my-4">
  <% if !current_user || !@memo_exists %>
    <h3 class="my-3 fw-bold">Bokriumへようこそ</h3>
    <div class="lead mb-4">
      本を「読んで終わり」にしない<br>
      書籍管理アプリです。
    </div>
    <ul class="list-unstyled mb-4 text-start mx-auto" style="max-width: 600px;">
      <li class="mb-4 d-flex align-items-start">
        <span class="me-3 text-primary fs-3">
          <i class="bi bi-upc-scan"></i>
        </span>
        <div>
          <span class="fw-bold text-primary">ISBNバーコードスキャンで簡単登録</span><br>
          <span class="text-muted small">書籍情報をすばやく電子本棚に追加できます。</span>
        </div>
      </li>
      <li class="mb-4 d-flex align-items-start">
        <span class="me-3 text-success fs-3">
          <i class="bi bi-journal-richtext"></i>
        </span>
        <div>
          <span class="fw-bold text-success">読書メモや画像を整理・保存</span><br>
          <span class="text-muted small">本ごとに感想や学びを記録し、いつでも振り返りが可能です。</span>
        </div>
      </li>
      <li class="mb-4 d-flex align-items-start">
        <span class="me-3 text-warning fs-3">
          <i class="bi bi-collection"></i>
        </span>
        <div>
          <span class="fw-bold text-warning">重複購入を防ぎ、蔵書を一目で把握</span><br>
          <span class="text-muted small">あなたの本棚を可視化し、同じ本を何度も買ってしまう心配がなくなります。</span>
        </div>
      </li>
      <li class="mb-4 d-flex align-items-start">
        <span class="me-3 text-info fs-3">
          <i class="bi bi-shuffle"></i>
        </span>
        <div>
          <span class="fw-bold text-info">過去のメモをランダム表示</span><br>
          <span class="text-muted small">忘れかけていた知識や気づきを日常に活かせます。</span>
        </div>
      </li>
      <li class="mb-4 d-flex align-items-start">
        <span class="me-3 text-danger fs-3">
          <i class="bi bi-people"></i>
        </span>
        <div>
          <span class="fw-bold text-danger">読書メモの共有機能</span><br>
          <span class="text-muted small">他のユーザーの視点や知識に触れ、新たな発見を得られます。</span>
        </div>
      </li>
    </ul>

    <div class="my-5">
      <span class="h5 text-success">蔵書を活かしたい読書家や、管理に悩む方へ。</span>
    </div>
    <div class="mb-4 small text-muted">
      Bokriumは「本を読むだけで終わらせない」思いから生まれました。<br>
      整理・実践・共有という仕組みで、読書による知識の蓄積を日常に息づかせます。
    </div>


    <div class="registration-cta text-center mt-5 text-dark fw-bold  big-shoulders-inline-bold">
      <h4>あなたの読書体験をもっと豊かに</h4>
      <p>Bokriumで読書メモを管理し、知識を整理しましょう</p>
      <%= link_to "今すぐ始める（無料登録）", new_user_registration_path, class: "btn btn-lg btn-success mt-2 mb-5" %>
    </div>

    <%= link_to "書籍を追加しましょう",  search_books_path, class: "btn btn-secondary" %>
  <% end %>

  <%= link_to "ゲストとして試してみる", guest_books_path, class: "btn btn-outline-secondary" %>

  <% if current_user && @random_memo && @random_memo.book %>
    <%= link_to book_path(@random_memo.book), class: "text-decoration-none text-reset" do %>
      <div class="container my-4">
        <h3 class="mb-3 mb-md-5">ランダムメモ表示</h3>

        <div class="card shadow-sm bg-light-bok p-3 mx-auto" style="max-width: 720px;">
          <div class="d-flex flex-column flex-md-row align-items-start gap-3">

            <!-- 書影 -->
            <% if @random_memo.book.book_cover.present? %>
              <%= image_tag @random_memo.book.book_cover, class: "img-fluid rounded w-100 w-md-auto mx-auto mx-md-0", style: "max-width: 160px;" %>
            <% else %>
              <div class="no-cover d-flex align-items-center justify-content-center text-muted text-center rounded w-100 w-md-auto" style="max-width: 160px; aspect-ratio: 2/3;">
                <span class="small px-2"><%= @random_memo.book.title %></span>
              </div>
            <% end %>

            <!-- テキストエリア -->
            <div class="flex-grow-1">
              <h5 class="fw-bold mb-1"><%= @random_memo.book.title %></h5>
              <p class="text-muted mb-2"><%= @random_memo.book.author %></p>
              <p class="text-muted mb-0"><%= truncate(strip_tags(@random_memo.content), length: 300) %></p>
            </div>

          </div>
        </div>
      </div>
    <% end %>
  <% end %>

  <% if @others_random_memo && @others_random_memo.book && @others_random_memo.user %>
  <%= link_to book_path(@others_random_memo.book), class: "text-decoration-none text-reset" do %>
    <div class="container my-4">
      <h3 class="mb-3 mb-md-5">ランダム公開メモ</h3>

      <div class="card shadow-sm bg-light-bok p-3 mx-auto" style="max-width: 720px;">
        <div class="d-flex flex-column flex-md-row align-items-start gap-3">

          <!-- 書影 -->
          <% if @others_random_memo.book.book_cover.present? %>
            <%= image_tag @others_random_memo.book.book_cover, class: "img-fluid rounded w-100 w-md-auto mx-auto mx-md-0", style: "max-width: 160px;" %>
          <% else %>
            <div class="no-cover d-flex align-items-center justify-content-center text-muted text-center rounded w-100 w-md-auto" style="max-width: 160px; aspect-ratio: 2/3;">
              <span class="small px-2"><%= @others_random_memo.book.title %></span>
            </div>
          <% end %>

          <!-- テキストエリア -->
          <div class="flex-grow-1">
            <h5 class="fw-bold mb-1"><%= @others_random_memo.book.title %></h5>
            <p class="text-muted mb-2"><%= @others_random_memo.book.author %></p>
            <p class="text-muted mb-2 small"><%= truncate(strip_tags(@others_random_memo.content), length: 280) %></p>

            <!-- 投稿者 -->
            <div class="d-flex align-items-center gap-2 mt-3">
              <%= image_tag user_avatar(@others_random_memo.user), class: "rounded-circle", alt: @others_random_memo.user.name, style: "width: 36px; height: 36px; object-fit: cover;" %>
              <span class="text-muted small"><%= @others_random_memo.user.name %></span>
            </div>
          </div>

        </div>
      </div>
    </div>
  <% end %>
<% end %>
</div>
